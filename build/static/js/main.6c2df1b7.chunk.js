(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(15),c=n.n(l),u=n(1),o=n.n(u),s=n(3),i=n(2),p=n(5),d=n.n(p),m=null,f={getAll:function(){var e=Object(s.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(o.a.mark(function e(t){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:m}},console.log(n),e.next=4,d.a.post("/api/blogs",t,n);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){m="bearer ".concat(e)},update:function(){var e=Object(s.a)(o.a.mark(function e(t,n){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("".concat("/api/blogs","/").concat(n),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),deleteBlog:function(){var e=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("".concat("/api/blogs","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},g={login:function(){var e=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},b=function(e){var t=e.blogs,n=e.setBlogs,l=e.blogId,c=e.title,u=e.author,p=e.url,d=e.likes,m=e.username,g=e.userId,b=e.loggedUser,v=Object(a.useState)(d),h=Object(i.a)(v,2),E=h[0],w=h[1],y=Object(a.useState)(!1),k=Object(i.a)(y,2),O=k[0],j=k[1],x={display:O?"":"none"},S={display:O?"none":""},C={display:b===m?"":"none"},B=function(){j(!O)},N=function(){var e=Object(s.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.update({user:g,likes:++d,author:u,title:c,url:p},l);case 4:w(d),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("likes update failed");case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(o.a.mark(function e(a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!window.confirm("remove blog ".concat(c," by ").concat(u))){e.next=11;break}return e.prev=2,e.next=5,f.deleteBlog(l);case 5:n(t.filter(function(e){return e.id!==l})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("remove blog failed");case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5}},r.a.createElement("div",{className:"title",onClick:B,style:S},c," ",u),r.a.createElement("div",{style:x,className:"blogDetails"},r.a.createElement("div",{onClick:B},c," ",u),r.a.createElement("div",null,p),r.a.createElement("div",null,E," likes ",r.a.createElement("button",{onClick:N},"like")),r.a.createElement("div",null,"added by ",m),r.a.createElement("button",{style:C,onClick:A},"remove")))},v=function(e){var t=e.handleLogin,n=e.username,a=e.handleUsernameChange,l=e.password,c=e.handlePasswordChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Log in to application"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"username: ",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,"password: ",r.a.createElement("input",{value:l,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"login"))))},h=r.a.forwardRef(function(e,t){var n=Object(a.useState)(!1),l=Object(i.a)(n,2),c=l[0],u=l[1],o={display:c?"none":""},s={display:c?"":"none"},p=function(){u(!c)};return Object(a.useImperativeHandle)(t,function(){return{toggleVisibility:p}}),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement("button",{onClick:p},e.buttonLabel)),r.a.createElement("div",{style:s},e.children,r.a.createElement("button",{onClick:p},"cancel")))}),E=function(e){var t=e.setNotificationMessage,n=e.setNotifType,l=e.blogs,c=e.setBlogs,u=Object(a.useState)(""),p=Object(i.a)(u,2),d=p[0],m=p[1],g=Object(a.useState)(""),b=Object(i.a)(g,2),v=b[0],E=b[1],w=Object(a.useState)(""),y=Object(i.a)(w,2),k=y[0],O=y[1],j=r.a.createRef(),x=function(){var e=Object(s.a)(o.a.mark(function e(a){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,j.current.toggleVisibility(),e.next=5,f.create({title:d,author:v,url:k});case 5:r=e.sent,c(l.concat(r)),t("a new blog ".concat(d," ").concat(v," added")),n("info"),setTimeout(function(){t(null),n(null)},5e3),m(""),E(""),O(""),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(1),t("error while adding a new blog"),n("error"),console.log(e.t0),setTimeout(function(){t(null),n(null)},5e3);case 21:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(h,{buttonLabel:"new blog",ref:j},r.a.createElement("h2",null,"create new"),r.a.createElement("form",{onSubmit:x},r.a.createElement("div",null,"title: ",r.a.createElement("input",{value:d,onChange:function(e){m(e.target.value)}})),r.a.createElement("div",null,"author: ",r.a.createElement("input",{value:v,onChange:function(e){E(e.target.value)}})),r.a.createElement("div",null,"url: ",r.a.createElement("input",{value:k,onChange:function(e){O(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"create"))))},w=function(e){var t=e.message,n=e.type;return null===t?null:"error"===n?r.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}},t):r.a.createElement("div",{style:{color:"blue",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}},t)};var y=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([]),u=Object(i.a)(c,2),p=u[0],d=u[1],m=Object(a.useState)(""),h=Object(i.a)(m,2),y=h[0],k=h[1],O=Object(a.useState)(""),j=Object(i.a)(O,2),x=j[0],S=j[1],C=Object(a.useState)(null),B=Object(i.a)(C,2),N=B[0],A=B[1],I=Object(a.useState)(""),T=Object(i.a)(I,2),L=T[0],U=T[1];Object(a.useEffect)(function(){function e(){return(e=Object(s.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getAll();case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),Object(a.useEffect)(function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);l(t)}},[]);var D=function(){var e=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.login({username:y,password:x});case 4:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),f.setToken(n.token),l(n),k(""),S(""),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),A("Wrong password or username"),U("error"),setTimeout(function(){A(null),U(null)},5e3);case 17:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t){return e.apply(this,arguments)}}();return""===n?r.a.createElement("div",{className:"App"},r.a.createElement(w,{message:N,type:L}),r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Bloglist App")),r.a.createElement(v,{handleLogin:D,username:y,handleUsernameChange:function(e){k(e.target.value)},password:x,handlePasswordChange:function(e){S(e.target.value)}})):r.a.createElement("div",{className:"App"},r.a.createElement(w,{message:N,type:L}),r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Bloglist App")),r.a.createElement("h2",null,"Blogs"),r.a.createElement("div",null,r.a.createElement("h3",null,n.name," is logged in")),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){l(""),window.localStorage.clear()}},"Logout")),r.a.createElement(E,{setNotificationMessage:A,setNotifType:U,blogs:p,setBlogs:d}),p.sort(function(e,t){return Number(t.likes)-Number(e.likes)}).map(function(e){return r.a.createElement(b,{key:e.id,blogs:p,setBlogs:d,blogId:e.id,title:e.title,author:e.author,url:e.url,likes:e.likes,username:e.user.username,userId:e.user.id,loggedUser:n.username})}))};c.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.6c2df1b7.chunk.js.map